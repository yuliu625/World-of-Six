# Agent Design

## Overview
目前可以做到的，首先是基于prompt给予agent身份。

Agent可以从3方面获得信息：
- system_prompt: 初始化的时候，告诉agent游戏规则。
- action & result: agent进行选择，获得的反馈。
- history: 过去的选择和结果。


## Role
不应仅仅就参与模拟的多个agent，还应该存在控制相关的agent。
- 一般参与者：  
  - 知道FEE的概念，知道正在参与world of six实验。
  - 根据之前的实验结果，做出自己的选择。
  - 进一步的实验，需要agent进行判断其他agent的理性情况。

- 控制者：  
  可以直接用固定程序来实现。视其他agent为可调用程序，解析并计算返回结果。
  - 通知每个agent，做出每轮的选择。
  - 收集选择，进行计算。
  - 告诉每个agent上轮的所有人的选择，告诉每个agent上轮获得的收益。


## Message Protocol
### 一般参与者
#### system prompt
最开始基于每个agent的身份。
```text
你是一名科研学者，你总是需要做出是否参加学术会议的决定。

对于学术会议：
你有固定的参与会议的边际效用，你每轮需要支付固定的会议费用。
你参加会议的效用被参加这次会议的总人数所影响，和你一样的人一共有6个，你们需要支付的会议费用是相同的，但是每个人参与会议的边际效用是不同的。

每次学术会议的收益计算公式是：
{latex_payoff}
其中，

你的目标是：
最大化你的效用。
你需要思考过去其他参与者的参与情况和你之前的选择下你所获得的收益，从而判断你每一轮的选择。

在本次实验中：
你需要一直记住，你的身份是{agent_key}。
每次会议，你需要支付固定的会议费用{fee}，你参与会议的边际效用是{benefit}。
```

#### choice prompt
每轮选择时，引导agent做出选择。
```text
在过去，所有玩家的选择和收益是：
{choice_and_payoff_history}

因此，你因为一轮的选择而获得的收益是{payoff}。

现在是第{game_round}轮试验。

接下来，逐步思考以下问题：
1. 你对于目前游戏的状态是如何分析的。
2. 你预期其他参与者们会如何做出选择。
3. 根据其他参与者的选择，你打算做出的选择，以及做出这个选择的原因。

最后，你以JSON格式返回你的选择。
现在，开始逐步思考，然后做出你的选择。
```

#### participant choice format
```json
{
  "choice": "",
  "analysis": "",
  "expectation": "",
  "reason": ""
}
```

#### result format

```json
[
  {
    "id": "",
    "choice": "",
    "payoff": ""
  },
  ...
]
```
